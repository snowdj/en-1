<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
  >
  <channel>
    <title>Cheng-Jun Wang</title>
    <atom:link href="http://chengjun.github.io/en/feed/" rel="self" type="application/rss+xml" />
    <link>http://chengjun.github.io</link>
    <lastBuildDate>2014-04-06T14:14:09+08:00</lastBuildDate>
    <webMaster>wangchj04@gmail.com</webMaster>
    
    <item>
      <title>My vision statement</title>
      <link>http://chengjun.github.io/en/2014/04/vison-statement/</link>
      <pubDate>2014-04-06T14:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2014/04/vison-statement</guid>
      <content:encoded><![CDATA[<p>My ideal career path is to work in a research university where I can continue my on-going study of opinion dynamics, and to share my understanding of computational communication (e.g. human online behavior, network science, and data journalism).</p>

<h3 id="computational-communication-cc">Computational Communication (CC)</h3>

<p>Computational communication is part of computational social science (<a href="http://gking.harvard.edu/files/LazPenAda09.pdf">pdf</a>). Computational communication emphasizes the importance of computational thinking in both theory-building and method-development. <code>Network science</code>, <code>natural language processing</code>, as well as the <code>agent-based modeling</code> methods opened a new door to the development of human communication research. The increasingly widely used <code>machine learning</code> techniques enriched our understanding about how we can understand the outside world in an efficient way. Further, there are mainly two applications of computational communication in the industry, including both <code>computational advertising</code> and <code>data journalism</code>. Put them together, we get a brand new framework for communication research.</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/09/outline.png" alt="" /></p>

<p><strong>Computability and Research</strong></p>

<p>I have drafted one article to outline the emerging framework of computational communication (In Chinese,<a href="http://site.douban.com/146782/"> click here to read</a>).  </p>

<p>To embrace the trend of “Computational Communication”, we have organized one google group to discuss issues relate with data crawling, analyzing, and visualization using various programming tools (<a href="http://groups.google.com/group/computational-communication">Click here to see</a> the google group).</p>

<hr />

<h3 id="research">Research</h3>

<p>“Truth is ever to be found in simplicity, and not in the multiplicity and confusion of things.” (Issac Newton)</p>

<p>“Any intelligent fool can make things bigger, more complex, and more violent. It takes a touch of genius and a lot of courage  to move in the opposite direction.” (Einstein)</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2011/09/theory-1024x737.jpg" alt="" /></p>

<p>Social events are thought to be too complex to capture the nature since there are too many competing mechanisms. However, it should not be used as the excuse of giving up finding the universal law. We live on our digital traces, and further human dynamics &amp; Internet make it possible to quantify the human behaviors in general, and communication behavior in specific.</p>

<h4 id="sandglass-metaphor">Sandglass metaphor</h4>
<p>My understanding of study could be described as a sandglass metaphor. Metaphor serves as the structure of comparison. Just like the sandglass, academic study start with a broad topic which is always a specific and significant puzzlement. Gradually, scholars should narrow down the research topic to draw your study on a general but significant theoretical issue, and to investigate it with a new perspective. Eventually, you can handle the research question which has important theoretical implications. While, this part of logic is corresponding to the introduction part and literature part.</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2011/09/sandglass.png" alt="" /></p>

<p>When you have finished your finding part, you should head towards the discussion part. Despite of justifying the expected and unexpected result of your findings, the most important part of discussion is to generalize your findings by talking with prior relevant findings, propositions and established theories. Following this line of logic, the conclusion is only a natural part of this conversation.</p>

<p>It’s helpful to understand the pyramid with the pyramid of scientific research on gravitation. Human beings had be curious about the earth’s position in the university. The overall framework of gravitation supplies a good example about the levels of research in science. </p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/09/gravitation.png" alt="" /></p>

<p><strong>The ladder of gravitation theories</strong></p>

<p>Although there are significant difference between social science and natural science (here humanity is not discussed, the readers can refer to computational humanity for more information), there are more similarities in the fundamental understandings about the basic logic of knowledge.</p>

<p>Here, I strongly recommend readers to watch the lecture given by Richard Feynman, which is titled <a href="https://www.youtube.com/watch?v=j3mhkYbznBk&amp;list=PL71D034A47B46E643&amp;feature=player_embedded">The Character of Physical Law – Part 1 The Law of Gravitation</a></p>

<p>Accordingly, we argues that, there are five levels of science: data, pattern, law, mechanism, and principle. Then you may ask, where is theory?</p>

<p>Theory is a contemplative and rational type of abstract or generalizing thinking, or the results of such thinking. Depending on the context, the results might for example include generalized explanations of how nature works, or even how divine or metaphysical matters are thought to work. The word has its roots in ancient Greek, but in modern use it has taken on several different related meanings. (Cited from Wikipedia)</p>

<p>“Scientific theories are the most reliable, rigorous, and comprehensive form of scientific knowledge.” It’s how observers look at the outside world.  According to Kant’s idea, human beings give orders to the whole universe (aka 人类为自然立法). In the pyramid of science, theory is about the pattern, law, mechanism, and principle which is based on the data (either empirical or simulated).</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/03/five-levels-of-science.png" alt="" /></p>

<p><strong>The pyramid of science</strong></p>

<h3 id="teaching">Teaching</h3>

<p>As a junior faculty member, I plan to teach some introductory courses on basic statistics, network analysis. To be specific, I want to teach three courses, both theoretical and practical.</p>

<p>First, writing for ssci journals. The idea comes from CC Lee’s class, in which he enlighten me to write in a logical way. The practice works for everybody. Even you have been a senior professor, or you are just a phd students who learnt little about the tradition of research. I was inspired to share my understanding of how to construct the structure of the paper, and how to polish it to get published.</p>

<p>Second, I want to teach social network analysis for both the theory and the application. There isn’t a steep threshold, so it could be attended for everyone. However, for the undergraduate, I will focus on the applications. While for the graduate students, I will put emphasis on theory.</p>

<p>Third, I want to give a class of market research in the perspective of media analysis, which will focus on the method of data collection, data analysis, and strategy consultation.</p>

<hr />

<h3 id="teaching-philosophy">Teaching Philosophy</h3>

<p>Teaching is one process of self-presentation, through which you represent the long-living knowledge of human kind. It really matters what you are thinking about your teaching philosophy. For me, according to my understandings of teaching, I would like to highlight the equality of teaching and learning, the nature of human beings, and being open-minded.</p>

<h4 id="skinner-box">Skinner Box</h4>
<ul>
  <li>Everyone is equal</li>
</ul>

<p>Respect Your Audience. A good lesson I learnt from this class come with a question: what should you do when your students did a good job? If not, what will you do? Reflect about the answer. Do you want to reward or punish them? Remember your answer in heart.</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2011/09/skinner_box.jpg" alt="" /></p>

<p>I would like to introduce Skinner’s box invented by Frederic Skinner, which contains levers that an animal can press, stimulus lights, electric grid, and food pellet. Following the logic of behaviorism, when the subject correctly performs the behavior, the chamber mechanism delivers food or another reward. Or else, the box delivers a punishment for incorrect or missing responses.</p>

<p>Thus, you may realize that you are treating your students as passive experimental subjects. The beginning point is never to treat your students as experimental rats, and even animals deserve your respects. Students are human beings who have their own feelings, emotions, and values. The first step of teaching should be to learn to respect your audiences, even though they behave passively, or make no progress.</p>

<ul>
  <li>Understanding human nature</li>
</ul>

<p>Effective teaching is to impose a set of values &amp; beliefs on the student. The most important part should be teaching the students how to learn. The best way of learning should be acting according to the nature of human beings. Everyone had been a curious kid who wanted to explore every part of the world. Just like the cat is curious about the fish (sometime, for eating, while sometimes just for fun), human beings, in the nature, are curious about the part of knowledge they are interested in. The second step of effective teaching should be inspiring your students to fulfill their interests in the learning process.</p>

<p>I was always not surprised about <a href="http://www.google.com.hk/search?rlz=1C1_____enHK414&amp;aq=f&amp;gcx=c&amp;sourceid=chrome&amp;ie=UTF-8&amp;q=Thomas+Suarez">the story of Thomas Suarez</a>, the 12 years old kid who made two iphone Apps by learning python, java, and c. Little Thomas has been fascinated by computers and technology before kindergarten. What the teacher should think is how could we contribute to the audiences’ real interests, rather than beat around the bush complaining why the students have no passion in the boring class.</p>

<ul>
  <li>Being Open-minded</li>
</ul>

<p>The world is always changed by new comers. The teacher will finally find his or her understandings about the cutting-edge scientific study are not perfect. The best way is not to constrain the students from challenging the tradition. Being open-minded, sit down, and enjoy the new outline drawn by the young people.</p>

<hr />

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2011/09/logic.png" alt="" /></p>

<p>My motto is “follow your logic”, which is a rational approach working in most parts of my life, especially in my academic career. The most important part of research is the logic which  determines your research method and your theoretical work.</p>

<hr />
]]></content:encoded>
    </item>
    
    <item>
      <title>Fitting rank order distribution with R</title>
      <link>http://chengjun.github.io/en/2014/03/fit-power-law/</link>
      <pubDate>2014-03-17T14:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2014/03/fit-power-law</guid>
      <content:encoded><![CDATA[<p>The long-tail distribution can be quantified in primarily <a href="http://arxiv.org/pdf/cond-mat/0412004.pdf?origin=publication_detail">three ways, see Newman &#8216;s paper here</a>: </p>

<ul>
  <li>Power law distribution</li>
  <li>Zipf distribution</li>
  <li>Pareto distribution</li>
</ul>

<p>Here, I talk about the Zipf distribution which assesses the relationship between rank order and Frequency (probability). </p>

<blockquote>
  <p>Zipf&#8217;s law now refers more generally to frequency distributions of &#8220;rank data,&#8221; in which the relative frequency of the nth-ranked item is given by the Zeta distribution. from <a href="http://en.wikipedia.org/wiki/Zipf's_law">Wikipedia</a> </p>
</blockquote>

<h2 id="dgbd">DGBD</h2>

<p>In Gustavo Martínez-Mekler et al&#8217;s <a href="http://www.plosone.org/article/info%3adoi/10.1371/journal.pone.0004791">article</a>, they proposed a discrete generalized beta distribution: <script type="math/tex">f(r) = A(N+1-r)^b/r^a</script>, where r is the rank, <strong>N</strong> is maximum value, A the normalization constant and (a, b) two fitting exponents.</p>

<p>It&#8217;s interesting to find that <a href="http://journals.aps.org/pre/pdf/10.1103/PhysRevE.84.026113">Wu and Zhang (2011)</a> adopt the DGBD distribution to quantify the online social systems. Basically, they are interested in accelerating growth in human online behaviors. </p>

<p>Deﬁning P as the number of active users in a day and T as the total activity generated by these users, they find a power law relationship between them <script type="math/tex">T = P^\gamma</script>. Given <script type="math/tex">\gamma</script> larger than 1, there exists an accelerating growth phenomena in online systems (e.g., tagging, microblogging)</p>

<p>They denote the activity of a user in one day with t(r), in which r is the decreasing rank of the activity among all individual activities in the day. Thus the maximum value of r, <script type="math/tex">r_{max}</script>, equals population P. The DGBD model of individual activities is then</p>

<script type="math/tex; mode=display">t(r) = A(P+1−r)^b r^a (a > 0,b > 0)</script>

<p>They introduced that a determines the activities of highly active users(corresponds to the exponent <script type="math/tex">\alpha</script> in Zipf’s law), b determines the activities of the less active users. Using the DGBD, They can ﬁt the empirical curves with <script type="math/tex">R^2</script> &gt; 0.9. </p>

<p>Here I start with an empirical dataset. The Tweet of Milan city in December 2013. Basically, we know the language of each tweet. Thus we have the frequency of each language. </p>

<pre><code>freq = c(1116, 2067, 137 ,  124, 643,  2042, 55  ,47186,  7504, 1488, 211,   1608,  3517 , 7  , 896  ,  378, 17 ,3098, 164977  ,  601 ,  196, 637, 149 , 44,2 ,  1801, 882   , 636,5184,  1851,  776 ,   343   , 851, 33  ,4011,   209,  715 ,  937 , 20,   6922, 2028 , 23,  3045 , 16 , 334,  31 ,  2)

lan = c("af","ar","bg","cs","da","de","el","en","es","et","fa","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","mk","ne","nl","no","pl","pt","ro","ru","sk","sl","so","sq","sv","sw","th","tl","tr","uk","und","ur","vi","zh-cn","zh-tw")
</code></pre>

<p>Thus, we can calculate the decreasing rank for each language. </p>

<pre><code>Rank = rank(-freq, ties.method = c("first") )
data = data.frame(lan, freq, Rank)
data$Probability = data$Freq/sum(data$Freq)
</code></pre>

<p>We can write a simple function to fit the rank ordered data and capture the distribution. </p>

<pre><code>get_dgbd = function(freq){
  Rank = rank(-freq, ties.method = c("first") )
  p = freq/sum(as.numeric(freq))
  # get the log form
  log.f = log(freq)
  log.p = log(p)
  log.rank = log(Rank)
  log.inverse.rank = log(length(Rank)+1-Rank)
  
  # linear regression of zifp: for probability
  cozp=coef(lm(log.p~log.rank))
  zipf.p = function(x) exp(cozp[[1]] + cozp[2]*log(x))
  
  # linear regression of zifp: for frequency
  cozf=coef(lm(log.f~log.rank))
  zipf.f = function(x) exp(cozf[[1]] + cozf[2]*log(x)) 
  
  # linear regression of dgbd: for probability
  codp=coef(lm(log.p~log.inverse.rank + log.rank))
  dgbd.p = function(x) exp(codp[[1]]+ codp[[2]]*log(length(x)+1-x) + codp[[3]]*log(x))
  
  # linear regression of dgbd: for frequency
  codf=coef(lm(log.f~log.inverse.rank + log.rank))
  dgbd.f = function(x) exp(codf[[1]]+ codf[[2]]*log(length(x)+1-x) + codf[[3]]*log(x))
  return(c(zipf.p, zipf.f, dgbd.p, dgbd.f))
}

zipf.p = get_dgbd(data$Freq)[[1]]
zipf.f = get_dgbd(data$Freq)[[2]]
dgbd.p = get_dgbd(data$Freq)[[3]]
dgbd.f = get_dgbd(data$Freq)[[4]]


plot(freq~Rank,log="xy", xlab = "Rank (log)", ylab = "Frequency (log)", data = data)
curve(zipf.f, col="red", add = T, n = length(data$Rank))
curve(dgbd.f, col="blue", add = T, n = length(data$Rank))
</code></pre>

<p>Remember to specify the length of values in &#8216;curve&#8217;. About its importance, check <a href="http://stackoverflow.com/questions/22446006/why-is-curve-so-different-from-lines-and-points-in-r">this post</a> on stackoverflow. </p>

<p>Finally, we can plot it with ggplot2. </p>

<pre><code>require(ggplot2)
P = ggplot(data=data, aes(x=Rank, y=Freq, label = Var1)) + geom_point() + 
  coord_trans(xtrans = "log10", ytrans = "log10")+
  stat_function(fun = dgbd.f, n = length(Rank), colour = 'red', size = 1)+
  geom_text(aes(label=Var1),hjust=1.5, vjust=0, angle = 45, size = 3)

png(file = "./language_rank_order_distribution2.png", 
    width=8, height=5, 
    units="in", res=700)
P 
dev.off()
</code></pre>

<p><img src="http://farm3.staticflickr.com/2725/13212714535_820edf5a12_z.jpg" alt="" /></p>

<p><img src="http://farm3.staticflickr.com/2767/13213038184_4d8fb106d2_z.jpg" alt="" /></p>

<h2 id="how-to-construct-your-model">How to construct your model?</h2>

<p>Using the DGBD model, we can fit the frequency-rank data almost perfectly. However, there are many other other forms of alternative equations. For example, there are Zipf-Manderbrot Model and <a href="http://statweb.stanford.edu/~owen/courses/306a/ZipfAndGutenberg.pdf">its modifications</a>, How to guarantee that which specific model is the right one? We need to:</p>

<ul>
  <li>learn more about the underlying mechanisms. </li>
  <li>observe the patterns of the data</li>
</ul>

<p>In the paper titled <a href="http://www3.nd.edu/~networks/Publication%20Categories/03%20Journal%20Articles/Social%20Science/Modeling%20bursts_Phys.%20Rev.%20E%2073,%20036127%20(2006).pdf">Modeling bursts and heavy tails in human dynamics</a>, Alexei Vázquez et al tried to propose two queuing models to explain the <strong>value</strong> of scaling parameter in the temporal patterns of human behaviors. They capture the temporal patterns with two measurements: interevent time <script type="math/tex">\tau</script> and waiting times <script type="math/tex">\tau_{w}</script>.</p>

<p>The time between two consecutive events is called the interevent time, <script type="math/tex">\tau</script>; the waiting (or response) time, <script type="math/tex">\tau_w</script>, representing the amount of time a task waits on an individual’s priority list before being executed.</p>

<p>Assuming that <strong>the tasks are executed independently from each other at a constant rate <script type="math/tex">\lambda</script></strong>, the time can be approximated by a Poisson process: </p>

<p><script type="math/tex">p(\tau) = \lambda e^{-\lambda \tau}</script> . </p>

<p>However, we know that in many human behaviors, the Poisson process fails to capture the burst phenomenon. The temporal patterns can be generally categorized into two classes:</p>

<ul>
  <li>
    <p>A. The <script type="math/tex">\alpha</script>= 1 universality class: Web browsing, email, and library datasets</p>
  </li>
  <li>
    <p>B. The <script type="math/tex">\alpha</script>=3/2 universality class: The correspondence of Einstein, Darwin, and Freud, which is characterized by <strong>a power law decay</strong> combined with <strong>an exponential cutoff</strong>.</p>
  </li>
</ul>

<p><script type="math/tex">p(\tau)\simeq \tau^{-3/2} e^{-\tau / \tau_{0}}</script>. </p>

<p>in which <script type="math/tex">\tau_0 = \frac{1}{\mu (1-\sqrt{\rho})}</script>, and <script type="math/tex">\rho = \lambda / \mu</script>. Recall that <script type="math/tex">\lambda</script> is the arrival rate of new task, and <script type="math/tex">\mu</script> is the response rate , thus <script type="math/tex">\rho</script> is the task/job/traffic intensity. </p>

<ul>
  <li>Subcritical regime: When <script type="math/tex">\rho</script> &lt; 1, there are fewer job, and more queuing space. </li>
  <li>Critical regime: When <script type="math/tex">\rho</script> = 1, arrival rate equals response rate</li>
  <li>Supercritical regime: When <script type="math/tex">\rho</script> &gt; 1, there are more job, and less queuing space. </li>
</ul>

<p>However, they also find that the interevent time distribution between two consecutive transactions made by a stock broker. The distribution follows a power law with the exponential cutoff <script type="math/tex">p(\tau)\simeq \tau^{-1.3} e^{-\tau / \tau_{0}}</script>. </p>

<h4 id="references">References</h4>

<p>Martínez-Mekler G, Martínez RA, del Río MB, Mansilla R, Miramontes P, et al. (2009) Universality of Rank-Ordering Distributions in the Arts and Sciences. PLoS ONE 4(3): e4791. doi:10.1371/journal.pone.0004791</p>

<p>Wu L, Zhang J. (2011) Accelerating growth and size-dependent distribution of human online activities. PHYSICAL REVIEW E 84, 026113 (2011)</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Scraping data from Sina Weibo using Python</title>
      <link>http://chengjun.github.io/en/2014/03/scraping-weibo-using-python/</link>
      <pubDate>2014-03-16T12:01:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2014/03/scraping-weibo-using-python</guid>
      <content:encoded><![CDATA[<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/09/33.png" alt="" /></p>

<h3 id="weibo-oauth20">Weibo Oauth2.0</h3>

<p>I would like to introduce you how to use python to scrape tweets from Sina Weibo in this post. </p>

<h4 id="automatically-get-authorization-by-oauth20">Automatically get authorization by oauth2.0</h4>

<p>First, following this webpage to set your app, especially to get the app key, app secret, and set the callback url.  See an <a href="http://blog.laisky.us/2012/01/278/">introduction</a>.  </p>

<p>Second, following this <a href="http://www.how2dns.com/blog/?p=538">link</a>, you can automatically get the code from the callback url. </p>

<p>The following python script demonstrates how to automatically get authorization. </p>

<pre><code>#!/usr/bin/env python
# -*- coding: utf8 -*-

from weibo import APIClient
import urllib2
import urllib
import sys
import time
from time import clock
import csv
import random

reload(sys)
sys.setdefaultencoding('utf-8')

'''Step 0 Login with OAuth2.0'''
if __name__ == "__main__":
	APP_KEY = '663...' # app key
	APP_SECRET = '2fc....' # app secret
	CALLBACK_URL = 'https://api.weibo.com/oauth2/default.html' # set callback url exactly like this!
	AUTH_URL = 'https://api.weibo.com/oauth2/authorize'
	USERID = 'w...4' # your weibo user id
	PASSWD = 'w....' #your pw

	client = APIClient(app_key=APP_KEY, app_secret=APP_SECRET, redirect_uri=CALLBACK_URL)
	referer_url = client.get_authorize_url()
	print "referer url is : %s" % referer_url

	cookies = urllib2.HTTPCookieProcessor()
	opener = urllib2.build_opener(cookies)
	urllib2.install_opener(opener)

	postdata = {"client_id": APP_KEY,
				"redirect_uri": CALLBACK_URL,
				"userId": USERID,
				"passwd": PASSWD,
				"isLoginSina": "0",
				"action": "submit",
				"response_type": "code",
				}
	headers = {"User-Agent": "Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20100101 Firefox/11.0",
				"Host": "api.weibo.com",
				"Referer": referer_url
			}

	req  = urllib2.Request(
	   url = AUTH_URL,
	   data = urllib.urlencode(postdata),
	   headers = headers
	   )
	try:
		resp = urllib2.urlopen(req)
		print "callback url is : %s" % resp.geturl()
		code = resp.geturl()[-32:]
		print "code is : %s" %  code
	except Exception, e:
		print e

r = client.request_access_token(code)
access_token1 = r.access_token # The token return by sina
expires_in = r.expires_in

print "access_token=" ,access_token1
print "expires_in=" ,expires_in   # access_token lifetime by second. http://open.weibo.com/wiki/OAuth2/access_token

"""save the access token"""
client.set_access_token(access_token1, expires_in)
</code></pre>

<h3 id="get-the-number-of-retweets">Get the number of retweets</h3>
<p>Step 1. Assume that you have had a list of tweet ids, you want to get the number of repsots. Thus, you can have the distribution of the size of diffusion.</p>

<pre><code>''' Step 1 Get the number of reposts'''
"""get the user ids"""
dataReader = csv.reader(open('C:/Python27/weibo/sampledRtIds2.csv', 'r'), delimiter=',', quotechar='|')
ids = []
for row in dataReader:
    ids.append(int(row[0]))  # modify the number to get the diffusers' ids

file = open("C:/Python27/weibo/repostsRT300000m2.csv",'wb') # save to csv file

start = clock()
print start

for seqNum in range(1500, 2999):
	id = ids[(0 + 100*seqNum) : (100+100*seqNum)]
	id = str(id).strip('[]').replace('L', '')
	rate = client.get.account__rate_limit_status()
	sleep_time = rate.reset_time_in_seconds + 300
	remaining_ip_hits = rate.remaining_ip_hits
	remaining_user_hits = rate.remaining_user_hits
	if remaining_ip_hits &gt;= 10 and remaining_user_hits &gt;= 5:
		rtc = client.get.statuses__count(ids = id) # mid, 100
		for n in range(0, len(rtc)): # 0-99
			mid = rtc[n]['id']
			reposts = rtc[n]['reposts']
			comments = rtc[n]['comments']
			attitudes = rtc[n]['attitudes']
			timePass = clock()-start
			if round(timePass) % 10 == 0:
				print mid, reposts, len(rtc), "I have been working for %s seconds" % round(timePass)
			print &gt;&gt;file, "%s,%s,%s,%s" % (mid, reposts, comments, attitudes)
	elif remaining_ip_hits &lt; 10 or remaining_user_hits &lt; 5:
		print "Python will sleep %s seconds" % sleep_time
		time.sleep(sleep_time+60)

file.close()
</code></pre>

<h3 id="get-the-list-of-diffusers">Get the list of diffusers</h3>

<p>Step 2. If you want to step further and get the list of diffusers for a list of weibos. Thus, you will know how many reposts or retweets have been deleted by the website.</p>

<pre><code># '''Step 2 Get the diffusers'''
"""read ids"""
dataReader = csv.reader(open('C:/Python27/weibo/repostsSample3.csv', 'r'), delimiter=',', quotechar='|')
ids = []
for row in dataReader:
    ids.append(int(row[1]))  # get the number to get the mid

addressForSavingData= "C:/Python27/weibo/diffsersSave.csv"
file = open(addressForSavingData,'wb') # save to csv file

start = clock()
print start

lenid = len(ids) # lenid = 8 # test with the first two cases

for n in range(0, lenid+1):  # the 78 should be 77 here
	rate = client.get.account__rate_limit_status()
	sleep_time = rate.reset_time_in_seconds + 300
	remaining_ip_hits = rate.remaining_ip_hits
	remaining_user_hits = rate.remaining_user_hits
	if remaining_ip_hits &gt;= 10 and remaining_user_hits &gt;= 3:
		if reposts[n]%200 == 0:
			pages = reposts[n]/200
		else:
			pages = reposts[n]/200 + 1
		try:
			for pageNum in range(1, pages + 1):
				r = client.get.statuses__repost_timeline(id = ids[n], page = pageNum, count = 200)
				if len(r) == 0:
					pass
				else:
					m = int(len(r['reposts']))
					for i in range(0, m):
						"""1.1 reposts"""
						mid = r['reposts'][i].id
						text = r['reposts'][i].text.replace(",", "")
						created = r['reposts'][i].created_at
						"""1.2 reposts.user"""
						user = r['reposts'][i].user
						user_id = user.id
						user_name = user.name
						user_province = user.province
						user_city = user.city
						user_gender = user.gender
						user_url = user.url
						user_followers = user.followers_count
						user_bifollowers = user.bi_followers_count
						user_friends = user.friends_count
						user_statuses = user.statuses_count
						user_created = user.created_at
						user_verified = user.verified
						"""2.1 retweeted_status"""
						rts = r['reposts'][i].retweeted_status
						rts_mid = rts.id
						rts_text = rts.text.replace(",", "")
						rts_created = rts.created_at
						"""2.2 retweeted_status.user"""
						rtsuser_id = rts.user.id
						rtsuser_name = rts.user.name
						rtsuser_province = rts.user.province
						rtsuser_city = rts.user.city
						rtsuser_gender = rts.user.gender
						rtsuser_url = rts.user.url
						rtsuser_followers = rts.user.followers_count
						rtsuser_bifollowers = rts.user.bi_followers_count
						rtsuser_friends = rts.user.friends_count
						rtsuser_statuses = rts.user.statuses_count
						rtsuser_created = rts.user.created_at
						rtsuser_verified = rts.user.verified
						timePass = clock()-start
						if round(timePass) % 10 == 0:
							print mid, rts_mid, "I have been working for %s seconds" % round(timePass)
							time.sleep( random.randrange(3, 9, 1) )  # To avoid http error 504 gateway time-out
						print &gt;&gt;file, "%s,'%s','%s',%s,'%s',%s,%s,%s,'%s',%s,%s,%s,'%s',%s,%s,'%s',%s,'%s',%s,%s,%s,'%s',%s,%s,%s,%s,%s"  % (mid, created, text, # 3 # "%s,%s,|%s|,%s,|%s|,%s,%s,%s,|%s|,%s,%s,%s,%s,%s,%s,%s,%s,|%s|,%s,%s,%s,|%s|,%s,%s,%s,%s,%s" % (mid, created, text, # 3
											user_id, user_name, user_province, user_city, user_gender,  # 5 --&gt; 5
											user_url, user_followers, user_friends, user_statuses, user_created, user_verified,  # rts_text, # 6 --&gt; 9
											rts_mid, rts_created, # 2
											rtsuser_id, rtsuser_name, rtsuser_province, rtsuser_city, rtsuser_gender, # 5 --&gt; 18
											rtsuser_url, rtsuser_followers, rtsuser_friends, rtsuser_statuses, rtsuser_created, rtsuser_verified)  # 6  --&gt; 22
		except Exception, e:
			print &gt;&gt; sys.stderr, 'Encountered Exception:', e, ids[n]
			time.sleep(120)
			pass
	elif remaining_ip_hits &lt; 10 or remaining_user_hits &lt; 3:
		print "Python will sleep %s seconds" % sleep_time
		time.sleep(sleep_time+60)

file.close()
</code></pre>

<h3 id="get-the-following-relationships">Get the following relationships</h3>

<p>Step 3. Now, you may want to get the social graph for all the diffusers.</p>

<pre><code>'''Step 3 Get the social graph'''
"""read ids"""
dataReader = csv.reader(open('C:/Python27/weibo/SocialGraphIdsForStepThree.csv', 'r'), delimiter=',', quotechar='|')
ids = []
for row in dataReader:
    ids.append(int(row[0]))  # get the number to get the mid

ids = ids[188648:697060]

addressForSavingData= "C:/Python27/weibo/socialgraphSave142_2.csv"
file = open(addressForSavingData,'wb') # save to csv file

addressForSavingError = "C:/Python27/weibo/socialgraphSaveError142_2.csv"
errorlog = open(addressForSavingError,'w')
errorlog.close()

start = clock()
print start

for id in ids:
	try:
		rate = client.get.account__rate_limit_status()
		sleep_time = rate.reset_time_in_seconds + 300
		remaining_ip_hits = rate.remaining_ip_hits
		remaining_user_hits = rate.remaining_user_hits
		if remaining_ip_hits &gt;= 10 and remaining_user_hits &gt;= 3:
			cursor = -1
			fids=[]
			while cursor != 0:
				response = client.get.friendships__friends__ids(uid=id, count= 5000, cursor=cursor)  # the biggest count is 5000
				fids	+= response.ids
				cursor = response.next_cursor # previousCursor = response.previous_cursor
				timePass = clock()-start
				if round(timePass) % 10 == 0:
					print id, "I have been working for %s seconds" % round(timePass)
					# time.sleep( 0.01 * random.randrange(0, 5, 1) )  # To avoid http error 504 gateway time-out
				if cursor == 0:
					totalNum = response.total_number
					for fid in fids:
						print &gt;&gt;file, "%s,%s,%s"  % (id, fid, totalNum)
					break
		elif remaining_ip_hits &lt; 10 or remaining_user_hits &lt; 3:
			print "Python will sleep %s seconds" % sleep_time
			time.sleep(sleep_time+60)
	except Exception, e:
		print &gt;&gt;sys.stderr, 'Encountered Exception:', e, id
		errorlog = open(addressForSavingError, 'a')
		print &gt;&gt;errorlog, "%s,%s"  % (id, e)
		errorlog.close()
		print 'When the error happens, the id is:', id
		time.sleep(60)
		pass

file.close()
</code></pre>

<h3 id="get-the-diffusion-network">Get the diffusion network</h3>

<p>Step 4. Given the collected data of retweets, we can get the diffusion path by parsing the text of weibo.</p>

<pre><code>import re
import sys
from time import clock

reload(sys)
sys.setdefaultencoding('utf-8')

'''
Convert "Thu Aug 04 11:39:32 +0800 2011" to the ISO format: YYYY-MM-DD H:M:S
Refer to: http://stackoverflow.com/questions/15727510/using-python-regex-to-identify-retweeters-from-tweets-with-chinese-characters
'''

file = open("D:/chengjun/New/repostsReSampleClean.csv", 'r')
lines = file.readlines()

addressForSavingData= "D:/chengjun/New/diffusion_path6.csv"  
file = open(addressForSavingData,'wb') # save to csv file 

addressForSavingError = "D:/chengjun/New/Error.csv"  
errorlog = open(addressForSavingError,'w')
errorlog.close

start = clock()  
print start
	
for line in lines:
	list = line.split(',')
	rtsmid = list[15].strip()  #rmid
	userName = list[5].strip().replace("'", "") # username
	submitterName = list[18].strip().replace("'", "")
	tweet = list[3].replace(',','')
	RTpattern = r'''//?@(\w+)'''
	rt = re.findall(RTpattern, tweet.decode("utf-8"), re.UNICODE)
	if rt == None or len(rt)==0:
		target = userName
		source = submitterName
		print &gt;&gt;file, "%s,%s,%s"  % (rtsmid, source, target) 
	elif rt != None and len(rt) != 0:
		rt.insert(0, userName) # 
		for i in xrange(len(rt) - 1):
			target = rt[i].encode('utf-8')
			source = rt[i + 1].encode('utf-8')
			print &gt;&gt;file, "%s,%s,%s"  % (rtsmid, source, target) 
</code></pre>
]]></content:encoded>
    </item>
    
    <item>
      <title>The Rich-club on Sina Weibo</title>
      <link>http://chengjun.github.io/en/2014/03/weibo-landscape/</link>
      <pubDate>2014-03-14T12:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2014/03/weibo-landscape</guid>
      <content:encoded><![CDATA[<p>Getting the opinions tweeted &amp; retweeted by the most influential users of Sina Weibo About Sina Weibo, you can refer to the webpage of <a href="http://en.wikipedia.org/wiki/Sina_Weibo#cite_note-3">wikipedia</a>:</p>

<blockquote>
  <p>Sina Weibo (Chinese: 新浪微博; pinyin: Xīnlàng Wēibó; literally “Sina Microblog”) is a Chinese microblogging (weibo) website. Akin to a hybrid of Twitter and Facebook, it is one of the most popular sites in China, in use by well over 30% of Internet users, with a similar market penetration that Twitter has established in the USA. It was launched by SINA Corporation on 14 August 2009, and has more than 300 million registered users as of February 2012. </p>
</blockquote>

<p>What will  be the media landscape like? From this archive, you can get the opinions tweeted &amp; retweeted by the most influential users of Sina Weibo. For the Interest of Academic study, this archive is open now, you can find the Link to the archive here</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/landscape.png" alt="" /></p>

<p>400 media accounts+100 website accounts+ 100 government accounts +100 celebrities accounts+100 grass root accounts</p>

<h3 id="the-opinions-of-the-rich-club">The Opinions of the Rich Club</h3>

<p>Understanding the rich club, see <a href="http://chengjun.github.io/slides/strut/richclub/">my slides here</a>:</p>

<ul>
  <li>the weighted rich-club effect tests whether a select group 
of nodes share their strongest ties with each other in a 
weighted network (Opsahl et al., 2008)</li>
  <li>80-20 rule  (Pareto, 1897)</li>
  <li>high degree nodes form many ties with each other 
(Borgatti and Everett, 1999; Colizza et al., 2006; Newman, 2002)</li>
</ul>

<p>To study the news diffusion of Weibo Users, My collaborator Linwu and I had set up a research project of Weibo Landscape aiming at archiving the historical tweets of 800 verified weibo accounts (Rich club of Sina Weibo) before March 2012. Both the tweets created by them and the tweets retweeted by them are collected and indexed. So this archive can supply you the historical opinions reflected by these most influential users.</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/core-and-periphery.png" alt="" /></p>

<p>Although Sina Weibo is very densely connected, Individuals are separated from each other but closer to the celebrities. Thus the most influential users become the core of Sina Weibo, and they are followed by the common users. As the core of Sina Weibo, they have great influence on the information diffusion on the social media website.</p>

<ul>
  <li>
    <p>800 Influential Users (400 media accounts+100 website accounts+ 100-government accounts +100 celebrities accounts+100 grass root accounts) are identified by Sina Weibo.</p>
  </li>
  <li>
    <p>The data were collected though user timeline api using Python. 
The following relationship of the rich club reveals that they are closed connected (see the figure below).</p>
  </li>
</ul>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/social-network.png" alt="" /></p>

<p>What is the relationship between rich club, random sample, and the unsampled majority in our data?</p>

<p><img src="http://chengjun.github.io/slides/strut/richclub/richclub_files/11148691843_63cd8203c3_o.png" alt="" /></p>

<p>How is the weighted rich-club effect in Sina Weibo?</p>

<p><img src="http://chengjun.github.io/slides/strut/richclub/richclub_files/11148617174_4347265242_o.png" alt="" /></p>

<h3 id="have-a-try">Have a try!</h3>
<p>Unfortunately, this section does not work now. :&lt;</p>

<p>First, open the url: http://weblab.com.cityu.edu.hk/demo/weibo.html</p>

<p>Second, input and query key words (e.g. 占领华尔街，艾未未，汶川地震，动车出轨， 日本地震) and click the search button to see the results. For example, you can query for Occupying Wall Street (占领华尔街), and you can find the items such as:</p>

<pre><code>related 1-th-weibo:
mid:3365546399651413
score:-5.76427445942
uid:1893278624
link:source
time:Thu Oct 06 17:10:59 +0800 2011
content:【“占领华尔街”继续发酵 全美75所高校学生响应】“占领华尔街”抗议活动进入第19日，活动影响继续发酵，占领运动延伸至高校校园，最新发起的“占领高校”运动，号召全美高校学生5日下午加入上街游行的队伍。图为大批示威者在“占领华尔街”大本营——华尔街附近的祖科提公园Zuccotti Park集会。
</code></pre>

<p>If you have login Sina weibo, click the link of source, you can find the <a href="http://www.weibo.com/1893278624/xrv9ZEuLX">original tweet</a>.</p>

<h3 id="visualization-of-diffusion-path">Visualization of diffusion path</h3>

<p>Click the source of the top 1000 list of archive items, you can get the url of a given tweet, and then you can further visualize the diffusion path using the apps of Sina Weibo.</p>

<ul>
  <li>
    <p><a href="http://www.doodod.com/doodod/home">doodod</a></p>
  </li>
  <li>
    <p><a href="http://newgraph.sinaapp.com/">newgraph</a></p>
  </li>
</ul>

<p>For example, using the doodod, you can visualize the diffusion path following <a href="http://www.doodod.com/doodod/chuanbo?weiboURL=http://weibo.com/1893278624/xrv9ZEuLX">this link</a>. The figure looks like this:</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/freshnew.png" alt="" /></p>

<h6 id="the-landscape-of-information-diffusion-on-sina-weibo">The Landscape of Information Diffusion on Sina Weibo：</h6>
<p>Investigating the Rich-Club Effect</p>

<p>This blog post is derived from my project of information diffusion on Sina Weibo. Based on the data of weibo landscape, we find that: </p>

<p>Rich-club as a closely connected community in networks has important influences on the information flow within the online social system. We study the competing mechanisms underlying the information flows within and among different social groups inside the rich club of Sina Weibo. The results demonstrate that: first, there is relatively strong rich-club effect in both influential users and random sampled users; second, social selection, geographic proximity, and social influence have significant influence on the information flow within the rich-club for different social groups, and the impact of social influence is overwhelmingly strong. The implications help shed new light on our knowledge about the underlying mechanisms of information diffusion on the microblog.</p>

<p>In the following post, I will introduce how to scrape data from Sina Weibo using Python. </p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Simulating network diffusion with R</title>
      <link>http://chengjun.github.io/en/2014/03/simulate-network-diffusion-with-R/</link>
      <pubDate>2014-03-09T10:41:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2014/03/simulate-network-diffusion-with-R</guid>
      <content:encoded><![CDATA[<h2 id="introduction">Introduction</h2>

<p>Different from the traditional diffusion research, network diffusion research focuses on how network structure exerts its impact on the diffusion process. In this post, I present how to simulate the most simple network diffusion with R. </p>

<p>As the first step, the algorithm is quite simple:</p>

<ol>
  <li>Generate a network g: g(V, E).</li>
  <li>Randomly select one or n nodes as seeds.</li>
  <li>Each infected node influences its neighbors with probability p (transmission rate, <script type="math/tex">\beta</script>).</li>
</ol>

<h2 id="si-model">SI model</h2>

<p>Actually, this is the most basic epidemic model (SI model) which has only two states: Susceptible (S) and Infected (I). However, we will extend it to networks. </p>

<p>SI model describes the status of individuals switching from susceptible to infected. In this model, every individual will be infected eventually. Considering a close population without birth, death, and mobility, and assuming that each agent is homogeneous mixing,  SI model implies that each individual has the same probability to transfer the something (e.g., disease, innovation or information) to its neighbors (T. G. Lewis, 2011).</p>

<p>Given the transmission rate <script type="math/tex">\beta</script>, SI model can be described as:</p>

<script type="math/tex; mode=display">\frac{dS}{dt}=-\beta SI</script>

<script type="math/tex; mode=display">\frac{dI}{dt}=\beta SI</script>

<p>Note that I + S = 1, the equation <script type="math/tex">\frac{dI}{dt}=\beta SI</script> can be simplified as: </p>

<script type="math/tex; mode=display">\frac{dI}{dt}=\beta I(1-I)</script>

<p>Solve this equation, we can get a logistic growth function featured by its s-shaped curve. The logistic curve increases fast after it crosses the critical point, and grows much slower in the late stage. It can be used to fit the curve of diffusion of innovations. </p>

<p>Note that the SI model is quite naive. In the real case of epidemic spreading, we have to consider how the status of the infected change: the infected can recover and become susceptible again (SIS model), or the infected can recover and get immune (SIR, <script type="math/tex">\gamma</script> denotes the removal or recovery rate). </p>

<p>In this post, I intend to bring the network back into the simulation of SI model using R and the package igraph.</p>

<h2 id="generate-the-network">Generate the network</h2>

<pre><code>require(igraph)
# generate a social graph
size = 50

# regular network
g = graph.tree(size, children = 2); plot(g)
g = graph.star(size); plot(g)
g = graph.full(size); plot(g)
g = graph.ring(size); plot(g)
g = connect.neighborhood(graph.ring(size), 2); plot(g) # 最近邻耦合网络

# random network
g = erdos.renyi.game(size, 0.1)

# small-world network
g = rewire.edges(erdos.renyi.game(size, 0.1), prob = 0.8 )
# scale-free network
g = barabasi.game(size) ; plot(g)
</code></pre>

<h2 id="initiate-the-diffusers">Initiate the diffusers</h2>
<pre><code>seeds_num = 1
set.seed(2014); diffusers = sample(V(g),seeds_num) ; diffusers
infected =list()
infected[[1]]= diffusers

# for example, set percolation probability 
p = 0.128
coins = c(rep(1, p*1000), rep(0,(1-p)*1000))
n = length(coins)
sample(coins, 1, replace=TRUE, prob=rep(1/n, n))
</code></pre>

<h2 id="update-the-diffusers">Update the diffusers</h2>

<pre><code># function for updating the diffusers
update_diffusers = function(diffusers){
  nearest_neighbors = neighborhood(g, 1, diffusers)
  nearest_neighbors = data.frame(table(unlist(nearest_neighbors)))
  nearest_neighbors = subset(nearest_neighbors, !(nearest_neighbors[,1]%in%diffusers))
  # toss the coins
  toss = function(freq) {
    tossing = NULL
    for (i in 1:freq ) tossing[i] = sample(coins, 1, replace=TRUE, prob=rep(1/n, times=n))
    tossing = sum(tossing)
    return (tossing)
  }
  keep = unlist(lapply(nearest_neighbors[,2], toss))
  new_infected = as.numeric(as.character(nearest_neighbors[,1][keep &gt;= 1]))
  diffusers = unique(c(diffusers, new_infected))
  return(diffusers)
  }
</code></pre>

<h2 id="start-the-contagion">Start the contagion!</h2>
<p>R you Ready? Now we can start the contagion!</p>

<pre><code>i = 1
while(length(infected[[i]]) &lt; size){ 
  infected[[i+1]] = sort(update_diffusers(infected[[i]]))
  cat(length(infected[[i+1]]), "\n")
  i = i + 1
}
</code></pre>

<p>Let&#8217;s look at the diffusion curve first:</p>

<pre><code># "growth_curve"
num_cum = unlist(lapply(1:i, function(x) length(infected［x］) ))
p_cum = num_cum/max(num_cum)
time = 1:i

png(file = "./temporal_growth_curve.png", 
	width=5, height=5, 
	units="in", res=300)
plot(p_cum~time, type = "b")
dev.off()
</code></pre>

<p><img src="http://farm8.staticflickr.com/7299/12845959103_e19cd9cd99_n.jpg" alt="" /></p>

<p>To visualize the diffusion process, we label the infected nodes with the red color.</p>

<pre><code>E(g)$color = "blueviolet"
V(g)$color = "white"
set.seed(2014); layout.old = layout.fruchterman.reingold(g) 
V(g)$color[V(g)%in%diffusers] = "red"
plot(g, layout =layout.old)
</code></pre>

<p>I make the animated gif using the package animation developed by Yihui Xie.</p>

<pre><code>library(animation)

saveGIF({
  ani.options(interval = 0.5, convert = shQuote("C:/Program Files/ImageMagick-6.8.8-Q16/convert.exe"))
  # start the plot
  m = 1
  while(m &lt;= length(infected)){
    V(g)$color = "white"
    V(g)$color[V(g)%in%infected[[m]]] = "red"
    plot(g, layout =layout.old)
    m = m + 1}
})
</code></pre>

<p><img src="http://farm4.staticflickr.com/3806/12826172695_368a6f50a2_o.gif" alt="" /></p>

<p><img src="http://farm3.staticflickr.com/2848/12826237753_d8c97b1019_o.gif" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3729/12826584654_c84452f397_o.gif" alt="" /></p>

<p><img src="http://farm3.staticflickr.com/2851/12826173505_34649f488d_o.gif" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7391/12826173255_574e471023_o.gif" alt="" /></p>

<p><img src="http://farm4.staticflickr.com/3675/12826584484_7c6f35380c_o.gif" alt="" /></p>

<p><img src="http://farm8.staticflickr.com/7432/12826173045_ef3548ec04_o.gif" alt="" /></p>

<p>Similar to Netlogo (a software used for agent-based modeling), we can monitor the dynamic diffusion process with multiple plots. </p>

<pre><code>saveGIF({
  ani.options(interval = 0.5, convert = shQuote("C:/Program Files/ImageMagick-6.8.8-Q16/convert.exe"))
  # start the plot
  m = 1
  while(m &lt;= length(infected)){
    # start the plot
    layout(matrix(c(1, 2, 1, 3), 2,2, byrow = TRUE), widths=c(3,1), heights=c(1, 1))
    V(g)$color &lt;- "white"
    V(g)$color[V(g)%in%infected[[m]]] = "red"
    num_cum = unlist(lapply(1:m, function(x) length(infected[[x]]) ))
    p_cum = num_cum/size
    p = diff(c(0, p_cum))
    time = 1:m
    plot(g, layout =layout.old, edge.arrow.size=0.2)
    title(paste("Scale-free Network \n Day", m))
    plot(p_cum~time, type = "b", ylab = "CDF", xlab = "Time",
         xlim = c(0,i), ylim =c(0,1))
    plot(p~time, type = "h", ylab = "PDF", xlab = "Time",
         xlim = c(0,i), ylim =c(0,1), frame.plot = FALSE)
    m = m + 1}
}, ani.width = 800, ani.height = 500)
</code></pre>

<p><img src="http://farm4.staticflickr.com/3672/12848749413_7f9da8b8c7_o.gif" alt="" /></p>

<p>Based on this post, I made slides using Rpres in Rstudio, you can view it  following this <a href="http://chengjun.github.io/network-diffusion">link</a>. </p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Using slidify to publish HTML5 presentations</title>
      <link>http://chengjun.github.io/en/2013/08/using-slidify-to-publish-html5-presentations/</link>
      <pubDate>2013-08-18T00:30:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2013/08/using-slidify-to-publish-html5-presentations</guid>
      <content:encoded><![CDATA[<p>I am inspired to use markdown to make HTML5 slides, However the specification is too hard. Actually, I don&#8217;t know how to make it less ugly, especilly for the first page of the slides. </p>

<p>By chance, I find Torres&#8217;s slides (<a href="http://lcolladotor.github.io/Rmd-intro/">Click here</a>), it is made through R using the slidify package. Of course, you also need to write R markdown using Rstudio and Knitr. </p>

<h1 id="install-slidify-package-in-rstudio">Install slidify package in Rstudio</h1>

<pre lang="ruby"><code>install_github('slidify', 'ramnathv')
install_github('slidifyLibraries', 'ramnathv')
</code></pre>

<p>However, to install R packages host on Github is very painful. I failed in installing the slidifyLibrairies package. </p>

<p>Following thie post <a href="http://thiagosilva.wordpress.com/2013/02/17/installing-slidify-on-a-windows-machine/">installing-slidify-on-a-windows-machine</a>. Althought I have tried R CMD INSTALL, but failed. I don&#8217;t know why :&lt;, however, I use the alternative method to install R packages on local computers.</p>

<p>First, download slidifyLibraries from <a href="https://github.com/ramnathv/slidifyLibraries">github</a> to your local directory, e.g., &#8220;D:/github/&#8221;.</p>

<p>Second, extract it and rename it as &#8220;slidifyLibraries&#8221;.</p>

<p>Third, build it with this R script: </p>

<pre lang="ruby"><code>build("D:/github/slidifyLibraries/", binary=FALSE)
</code></pre>

<p>Fourth, install the tar.gz file following this R script:</p>

<pre lang="ruby"><code>install.packages("D:/github/slidifyLibraries_0.1.tar.gz", repos = NULL, type = "source")
</code></pre>

<h1 id="using-slidify-to-write-r-markdown">Using slidify to write R markdown</h1>

<p>initialize a presentation following this introduction about <a href="https://github.com/ramnathv/slidify">slidify</a>. </p>

<pre lang="ruby"><code>library(slidify)
author('mydeck')
</code></pre>

<h1 id="write-markdown-files">Write markdown files</h1>

<iframe width="420" height="315" src="//www.youtube.com/embed/I95GOmLc7TA" frameborder="0" allowfullscreen=""></iframe>

<pre lang="ruby"><code>&lt;iframe width="420" 
height="315" src="//www.youtube.com/embed/I95GOmLc7TA" 
frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;
</code></pre>

<p>Check my first slidify HTML5 slides here: chengjun.github.io/slides/computational-communication.html</p>

<p>Click <a href="http://chengjun.github.io/slides/computational-communication.html">here</a> to see it.  </p>

<p><img src="http://gifs.gifbin.com/1236681924_snail_transformers.gif" alt="" /></p>

<p>The markdown file is given below (I choose &#8220;standalone&#8221; as the mode):</p>

<pre lang="ruby"><code>---
title       : The Way to Computational Communication
subtitle    : 
author      : Cheng-Jun Wang
job         : Web Mining Web, City University of Hong Kong
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : standalone # {standalone, draft, selfcontained}
---

## Three metaphors of theory
&gt;Immanuel Kant: All our knowledge begins with the senses, proceeds then to the understanding, and ends with reason. There is nothing higher than reason.

![](http://farm8.staticflickr.com/7379/9532736494_99b95287a2_z.jpg)

--- .class #id 

## Sandglass of generalization

![](http://farm8.staticflickr.com/7366/9529954881_53a00fe15b_z.jpg)

---
## Five levels of Research

![](http://farm3.staticflickr.com/2819/9529954801_e6d59c8eba_z.jpg)

---
## Computational Thinking

![](http://farm4.staticflickr.com/3669/9529954763_06a6c95970_z.jpg)

---
## The Way to Computational Communication

![](http://farm6.staticflickr.com/5540/9529954731_4cbf032b06_z.jpg)

---

## Network Science

![](http://farm8.staticflickr.com/7353/9529954585_94686e3aa4_z.jpg)

--- .class1 #id1 bg:yellow


## What should we do?


- Network science
- Statistical linguistics
- Human dynamics
- Big data&amp; digital traces
- Digital media
- Data journalism
- Computational advertising

![](http://gifs.gifbin.com/1236681924_snail_transformers.gif)

---

## Thank you for your attention!

## wangchj04@gmail.com

![](http://farm3.staticflickr.com/2840/9508319890_2cbaa2c4d4_n.jpg)
</code></pre>

<h1 id="how-to-host-your-slidify-html5-presentations-on-github">How to host your slidify HTML5 presentations on github</h1>

<p>I failed in publish it directly to github following the the way introduced by slidify website. I am not sure why it does not work. However, I figured out my solutions.</p>

<p><img src="http://farm6.staticflickr.com/5460/9533395543_6747795221_o.png" alt="" /></p>

<p>You can still do it very easily. But, first, you should know the structure of github repository. Assume you have a github repo named &#8220;slidify&#8221;. We can work at different branches: &#8220;master&#8221; or &#8220;gh-pages&#8221;. You can generate your gh-pages branch following the figure on the right. gh-pages is a very special branch of github repository. The branch of gh-pages are acturally a website host by Github.The files in slidify/test/index.html on the branch of gh-pages could be displayed by your default github website. e.g., chengjun.github.io/slidify/test. So the first move is to make a gh-pages, and upload your slidify stuff to this branch.</p>

<p>You can generate new sub-branch too. e.g., slidify/computational-communication. See two examples:</p>

<p><a href="http://chengjun.github.io/slides/slidify/">http://chengjun.github.io/slides/slidify/</a></p>

<p><a href="http://chengjun.github.io/slides/slidify/computational-communication">http://chengjun.github.io/slides/slidify/computational-communication</a></p>

<p>If your markdown file is &#8216;selfcontained&#8217; , it will not turn to https://code.google.com/p/slidifylibraries/ for the font and theme information (but it still needs to refer to the other websites where your insert your pictures into your slides). So theoretically, self-contained file is a little little little bit faster than &#8216;standalone&#8217; files. However, you can almost not detect it if the internet access is good. Check this standalone HTML in the following link and compare it with the two selfcontained ones on the above:</p>

<p><a href="http://chengjun.github.io/slides/computational-communication">http://chengjun.github.io/slides/computational-communication</a></p>

<p>In you sub-directory, you have to have everything the selfcontained html needs, it is not clever enough to scan the upper-directory. Anyway, enjoy your HTML5 slides host on github!</p>

<h1 id="afterwords">Afterwords</h1>

<p>I have also tried to use pandoc and reveal.js to make slides.</p>

<p>Using reveal.js, I have reproduced the slides of computational communication on slid.es.</p>

<iframe src="http://slid.es/cheng-junwang/cc/embed" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<p>However, using pandoc and markdown, it seems to be quite limited to set the slides, here is the result:<a href="chengjun.github.io/slides/reveal.js/cc">chengjun.github.io/slides/reveal.js/cc</a></p>

<p>The method is briefly introduced here: <a href="chengjun.github.io/slides/reveal.js/pandoc-revealjs-slides">chengjun.github.io/slides/reveal.js/pandoc-revealjs-slides</a></p>

]]></content:encoded>
    </item>
    
    <item>
      <title>Plot regression coefficient with R</title>
      <link>http://chengjun.github.io/en/2013/08/plot-regression-coefficient-with-r/</link>
      <pubDate>2013-08-16T18:14:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2013/08/plot-regression-coefficient-with-r</guid>
      <content:encoded><![CDATA[<p>To visualize the regression coefficient is very useful. There are at least to packages (arm, coefplot) devoted to this purpose. However, both them are not beautiful enough, compared with the effect of boxplot. </p>

<p>I refer to the R script written by <a href="http://www.carlislerainey.com/2012/06/30/coefficient-plots-in-r/">Carlisle Rainey</a>. What I do is to add rectangles and vertical line into the plot made by Carlisle Rainey.Please refer to this post for more information: <a href="http://www.carlislerainey.com/2012/06/30/coefficient-plots-in-r/">http://www.carlislerainey.com/2012/06/30/coefficient-plots-in-r/</a></p>

<p><img src="http://farm4.staticflickr.com/3737/9520667493_576a8525c7_z.jpg" alt="" /></p>

<p>Figure 1 Plot with rectangles and vertical lines</p>

<p>Here is the R script:</p>

<pre lang="ruby"><code>library(arm)
library(alr3) # load the alr3 package (contains data set for illustration)
data(highway) # load the highway data set from alr3
d &lt;- highway  # call the data set d for convenience

m &lt;- lm(Rate ~ Lwid + Shld + Lane + Len + ADT + Trks, data = d)  # estimate the normal linear model

## create a vector to store the variable names
var.names &lt;- c("lane width, in feet", "width in feet of outer\nshoulder on the roadway",
  "total number of lanes\nof traffic", "length of the highway\nsegment in miles",
  "average daily traffic\ncount in thousands", "truck volume as a percent\nof the total volume")

## set up the plot region:
plot(c(100, 250), c(300, 450), type = "n")
rect(120,300, 180, 305, col=rainbow(11, start=.7,end=.1))

## Plot Labels outside graph

# set the graphical parameters
par(
  family = "serif",  # I don't plot in anything but serif
  oma = c(0,0,0,0),  # Since it is a single plot, I set the outer margins to zero.
  mar = c(5,10,4,2)  # Inner margins are set through a little trial and error.
  )

# create an empty plot for total customization
plot(NULL,                              # create empty plot
  xlim = c(-2, 2),                      # set xlim by guessing
  ylim = c(.7, length(var.names) + .3), # set ylim by the number of variables
  axes = F, xlab = NA, ylab = NA)       # turn off axes and labels

# add the data
est &lt;- coef(m)[-1]              # conveniently store the estimates (minus the constant)
se &lt;- sqrt(diag(vcov(m)))[-1]   # conveniently store the std. errors (minus the constant)
for (i in 1:length(est)) {                # loop over a counter the length of the estimate vector
  points(est[i], i, pch = 3, cex = .5)     # add the points to the plot
  points(est[i]+ 1.64*se[i], i, pch = "|", cex = 1.5) ## add the verticle lines
  points(est[i]- 1.64*se[i], i, pch = "|", cex = 1.5) ## add the verticle lines
  lines(c(est[i] + 1.64*se[i], est[i] - 1.64*se[i]), c(i, i), )         # add the 90% confidence intervals
  rect(est[i] + .67*se[i],i-0.1, est[i]- .67*se[i], i+0.1, col="#0000ff22") ## add rectancles to present 50% confidence intervals
  text(-2.9, i, var.names[i], xpd = T, cex = .8)                      # add the variable names
}

# add axes and labels
axis(side = 1)                                                                                          # add bottom axis
abline(v = 0, lty = 3, col = "grey")                                                                    # add verticle line
mtext(side = 1, "Linear Regression Coefficient", line = 3)                                              # label bottom axis
mtext(side = 3, "Linear Regression Model of\n the Accident Rate per Million Vehicle Miles", line = 1)   # add title
box() 
</code></pre>
]]></content:encoded>
    </item>
    
    <item>
      <title>Understanding Bass diffusion model with R</title>
      <link>http://chengjun.github.io/en/2013/08/understanding-bass-diffusion-model-with-R/</link>
      <pubDate>2013-08-14T14:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2013/08/understanding-bass-diffusion-model-with-R</guid>
      <content:encoded><![CDATA[<h4 id="introduction">Introduction</h4>
<p>I had made <a href="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/Bass-Diffusion-Model.pdf">slides</a> to understand the bass diffusion model which is proposed by Frank M. Bass in 1969. The model proposes that diffusion is motivated both by inovativeness and imitation: first, the innovative early adopters adopted the products, after which the followers will imitate them and adopt the products.</p>

<ul>
  <li>
    <p>The Bass model coefficient (parameter) of innovation is p.</p>
  </li>
  <li>
    <p>The Bass model coefficient (parameter) of imitation is q.</p>
  </li>
</ul>

<p><a href="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/Bass-Diffusion-Model.pdf">The slides</a> will show you how to deprive the equation of Bass diffusion model by both discrete-time model and continuous model (using Hazard rate).</p>

<p><img src="http://weblab.com.cityu.edu.hk/blog/chengjun/files/2012/04/340px-Bass_diffusion_model.svg_.png" alt="" /></p>

<blockquote>
  <p>“The probability of adopting by those who have not yet adopted is a linear function of those who had previously adopted.”</p>
</blockquote>

<p>We can solve the differential equation of bass diffusion model using <em><strong>Mathematica</strong></em>. </p>

<p><img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS8tdVsryFiSA3luFwwraGcGfyHDRtLC3p54Z4htKs9lWJdF-tx6sU46Z5Z" alt="" /></p>

<p>Here, we can also simulate the Bass diffusion model using R code (<a href="http://rpubs.com/chengjun/bass_model">Click here to view it on Rpub</a>).</p>

<pre><code># basss diffusion model chengjun, 20120424@canberra

# refer to http://en.wikipedia.org/wiki/Bass_diffusion_model and
# http://book.douban.com/subject/4175572/discussion/45634092/

# BASS Diffusion Model three parameters: the total number of people who
# eventually buy the product, m; the coefficient of innovation, p; and the
# coefficient of imitation, q

# example
T79 &lt;- 1:10
Tdelt &lt;- (1:100)/10
Sales &lt;- c(840, 1470, 2110, 4000, 7590, 10950, 10530, 9470, 7790, 5890)
Cusales &lt;- cumsum(Sales)
Bass.nls &lt;- nls(Sales ~ M * (((P + Q)^2/P) * exp(-(P + Q) * T79))/(1 + (Q/P) * 
    exp(-(P + Q) * T79))^2, start = list(M = 60630, P = 0.03, Q = 0.38))
summary(Bass.nls)
</code></pre>

<p>This is the result:</p>

<pre><code>## 
## Formula: Sales ~ M * (((P + Q)^2/P) * exp(-(P + Q) * T79))/(1 + (Q/P) * 
##     exp(-(P + Q) * T79))^2
## 
## Parameters:
##   Estimate Std. Error t value Pr(&gt;|t|)    
## M 6.80e+04   3.13e+03   21.74  1.1e-07 ***
## P 6.59e-03   1.43e-03    4.61   0.0025 ** 
## Q 6.38e-01   4.14e-02   15.41  1.2e-06 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 727 on 7 degrees of freedom
## 
## Number of iterations to convergence: 8 
## Achieved convergence tolerance: 7.32e-06
</code></pre>

<p>Then we can get the regression coefficient and plot the growth:</p>

<pre><code># get coefficient
Bcoef &lt;- coef(Bass.nls)
m &lt;- Bcoef[1]
p &lt;- Bcoef[2]
q &lt;- Bcoef[3]
# setting the starting value for M to the recorded total sales.
ngete &lt;- exp(-(p + q) * Tdelt)

# plot pdf
Bpdf &lt;- m * ((p + q)^2/p) * ngete/(1 + (q/p) * ngete)^2
plot(Tdelt, Bpdf, xlab = "Year from 1979", ylab = "Sales per year", type = "l")
points(T79, Sales)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAdVBMVEX9/v0AAAAAADkAAGUAOTkAOWUAOY8AZrU5AAA5ADk5AGU5OWU5OY85j7U5j9plAABlADllAGVlOQBlOY9ltf2POQCPOTmPZgCPj2WPtY+P29qP2/21ZgC1/v3ajzna24/a/rXa/v39tWX924/9/rX9/tr9/v2CCboDAAAAJ3RSTlP//////////////////////////////////////////////////wCDVpfZAAAACXBIWXMAAAsSAAALEgHS3X78AAAPgElEQVR4nO2di2LbuBFFl05re7Op7KR22tSyWuv1/59YkpJiySYpgJgBZnDv6W5jR2vwDo5AAhYff+wJJH+UDkDKQPGgUDwoFA8KxYNC8aBQPCgUDwrFg0LxoFA8KBQPCsWDQvGgUDwoFA8KxYNC8aBQPCgUDwrFg0LxoFA8KBQPCsWDQvGgUDwoFA8KxYNC8aBQPCgUDwrFg0LxoFA8KBQPCsWDQvGgUDwoFA8KxYNC8aBQPCgUDwrFg0LxoFA8KBQPCsWDQvGgUDwoFA8KxYNC8aBQPCgUDwrFg0LxoKSIb4hlFMUn/CzRhuJBoXhQKB4UigeF4kGheFAoHhSKB4XiQaF4UCgeFIovw9VPSdQDTL9M8QocPxu7/hGZaojplyk+iusqP9gu557iBWn2V6oe0lxIPcULckX8mOIi6ilekGnxM94SilC8JFOH7OnuyK6e4vNwXWzm7qL4LIT0Rd7+ovgchHVF1g6j+AyE9kTOHqN4fcI7ImOXUbw6Mf2Qr88oXpu4bsjWaRSvTGwv5Oo1itclvhMydRvF6zLYCdOfyeXpN4pXZdj72AtTPyQNxWsy3AXXP73VyBK3jeviN/f91dZfXmObBmDsY9jxlyZ/TpRU8bvnp/7P9e1bZNP1M9oBV8+7ydB1qeK3318v/gxvun7md4AD8Rzxo6TUr993ycf47QOP8YMkle9A/OymKyexevXOo3glUqvX7j0u53RIL165+zi506F68VzODSJRu27/ccRrIFO6agdyOaeBUOmaPchZvQJSlVO8M8QqV+xCLufkkSvcsHhO7j4jWLheHyos5wLviF4tknXbFc8R/xHZstU6kcs5aYTL1upFzuqFka6a4n0gX7RSN3I5J4tC0Tr9yMmd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" alt="" /></p>

<p>We can also plot the cdf:</p>

<pre><code># plot cdf
Bcdf &lt;- m * (1 - ngete)/(1 + (q/p) * ngete)
plot(Tdelt, Bcdf, xlab = "Year from 1979", ylab = "Cumulative sales", type = "l")
points(T79, Cusales)
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAflBMVEX9/v0AAAAAADkAAGUAOTkAOWUAOY8AZrU5AAA5ADk5AGU5OWU5OY85ZrU5j7U5j9plAABlADllAGVlOQBlOY9ltf2POQCPOTmPOWWPZgCPj2WPtY+P29qP2/21ZgC1/rW1/v3ajzna24/a/rXa/v39tWX924/9/rX9/tr9/v0I1W0bAAAAKnRSTlP//////////////////////////////////////////////////////wAyqPBcAAAACXBIWXMAAAsSAAALEgHS3X78AAAOfklEQVR4nO2di3rbuBFGl24bJ9m0tpPabpuV1mqj2/u/YEVKsnWhJIAYEDOYc77sl3WcxXL+Y5CASIC/rcElv5U+ACgD4p2CeKcg3imIdwrinYJ4pyDeKYh3CuKdgninIN4piHcK4p2CeKcg3imIdwrinYJ4pyDeKYh3CuKdgninIN4piHcK4p2CeKcg3imIdwrinYJ4pyDeKYh3CuKdgninIN4piHcK4p2CeKcg3imIdwrinYJ4pyDeKYh3CuKdgninIN4piHfKbfGLz03LX95GOBoYjZviVy/P3e/zT7+yHwyMx03xy+9vR79DHdDjnXL7Gr985BpfIYzqnYJ4pzCdcwqDO6ekTOca0Eyi+Cs9/kbTMCqnqlPFX5nOIV4RzfpESLL46/8vUALinSIv/vJ0DvGakL7GM7gzSqr4nulc4IQBikKPdwrTOacwqncK4p3CdM4pDO680Fz98pSku3MRRwWZOZtc0+NdcO6C6ZwHelQwqndAnwnE10+vCIHp3PPqpWl6HrlDvA76PUgM7qab8d3iG4M7nVzQIDCdW71OmM5p5eI90uRT/aa7zx8207n72KZhBC47SB/cTbvp3Ll3xJfnigJG9fVy9VEYxFfL9fwRXys34kd8pdxKH/F1cjN8xNcJ4n1yO3vE10hA9IivkJDkEV8fQcEjvjrCcke8dSKXwQb+NcRr53The2jqiDfOifjg0BFvnGPx4Zkj3jqH1/iIyBFfETGJI74eogJHfDXE5Y34WoiMG/GVEJs24usgOmzEV0F81oivgQFRI74ChiTN5kcVUEI8W6GUZ1DQbH5knmE50+OtMzBmNj8yztCUGdXbZnDIiDfN8IyZzlkmIWIGd4ZJSZjp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" alt="" /></p>

<p>When q=0, only Innovator without immitators.</p>

<pre><code># when q=0, only Innovator without immitators.
Ipdf &lt;- m * ((p + 0)^2/p) * exp(-(p + 0) * Tdelt)/(1 + (0/p) * exp(-(p + 0) * Tdelt))^2

Impdf &lt;- Bpdf - Ipdf

plot(Tdelt, Bpdf, xlab = "Year from 1979", ylab = "Sales per year", type = "l", col = "red")
lines(Tdelt, Impdf, col = "green")
lines(Tdelt, Ipdf, col = "blue")
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAflBMVEX9/v0AAAAAADkAAGUAAP8AOTkAOWUAOY8AZrUA/wA5AAA5ADk5AGU5OWU5OY85j7U5j9plAABlADllAGVlOQBlOY9ltf2POQCPOTmPZgCPj2WPtY+P29qP2/21ZgC1/v3ajzna24/a/rXa/v39tWX924/9/rX9/tr9/v3/AACFLLoLAAAAKnRSTlP/////////////////////////////////////////////////////AP+MjuKjAAAACXBIWXMAAAsSAAALEgHS3X78AAAPfElEQVR4nO3di1ob1xVA4cppiyCOi50U3KZcWiQQ7/+CnRlJoMvM6Fz2ue291pfEsYGx8M8enWM00l82ZLK/lL4BVCbgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjQa80YA3GvBGA95owBsNeKMBbzTgjRYDv6CaSwgf8bGUOuCNBrzRgDca8EYD3mjAGw14owFvNOCNBrzRgDca8GV6f38vewOAz9/7Vv29KD7weTvRLmcPfM7GmAvRA5+vKeIi9MBna4a3AD3wuZq3zU4PfJ4uw2aWBz5LLqp55YHPkZtpVnngM+QqmlMe+PS5e2aUBz55Ppr55IFPnZ9lNnngEzcheX197fX+4gGftjHH66369Th+Jnng03bKeKI9Zp9HHviknSCOjfj5r2WRBz5lx4RTd+tnv55DPhp+fTNcbf3Lk++hDXTiPv2OJ/QtwL/d3w0/rq5ePA+tP2f3zSl9BvlY+Nffn45+dD+0/g75pk7zB+8x8ZGJYuKTdeTu8P555aPv41+/cx8/mq/70Xs1AB98aOX5u+eVBz5RB3Ku7lnl2c6lKcg9pzyLuzR9svm4H7535fBs50YLdc8nz8SnKNw9mzzbuRTFwGeSZ1WfoCj3gw8CvrE+wILc88iznZMv1v3zAyuGZ3F33p4r2D3HyCfYzjk+I7ra4gc+x8gz8dJJuGcYebZz0sWf6I8+OpU8q3rhZNzTn+yBl03kRH/08Ynk2c7J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" alt="" /></p>

<p>The cdf in this case can also be plotted:</p>

<pre><code># when q=0, only Innovator without immitators.
Icdf &lt;- m * (1 - exp(-(p + 0) * Tdelt))/(1 + (0/p) * exp(-(p + 0) * Tdelt))
# plot(Tdelt, Icdf, xlab = 'Year from 1979',ylab = 'ICumulative sales',
# type='l')
Imcdf &lt;- m * (1 - ngete)/(1 + (q/p) * ngete) - Icdf
plot(Tdelt, Imcdf, xlab = "Year from 1979", ylab = "Cumulative sales", type = "l", 
    col = "red")
lines(Tdelt, Bcdf, col = "green")
lines(Tdelt, Icdf, col = "blue")
</code></pre>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfgAAAH4CAMAAACR9g9NAAAAh1BMVEX9/v0AAAAAADkAAGUAAP8AOTkAOWUAOY8AZrUA/wA5AAA5ADk5AGU5OWU5OY85ZrU5j7U5j9plAABlADllAGVlOQBlOY9ltf2POQCPOTmPOWWPZgCPj2WPtY+P29qP2/21ZgC1/rW1/v3ajzna24/a/rXa/v39tWX924/9/rX9/tr9/v3/AAAhikS2AAAALXRSTlP/////////////////////////////////////////////////////////AP8byRkCAAAACXBIWXMAAAsSAAALEgHS3X78AAAObElEQVR4nO3dD1sbxxGA8YimNdiOU8AuuG0CtVokIX//z1ftIYH+3Ind29nbmZ33fdIncYiv2D/P6hbuTr+syWW/1P4EqE7AOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOw14pwHvNOCdBrzTgHca8E4D3mnAOy0HfkY1u3rn4wXhM34u5Xb1zseBb7P33IFvNOB99q478E32vjvwLRbhDnyDxbgD315R7sA3V5w78K0V6Q58Y8W6A99W0e7AN9U595+HPwS+oc64/zxyB76lhuGP2YFvqRR34NspyR34ZkpzB76VEt2Bb6VB+H534BtpyP1kG7cL+CYadB/8GcC3ULo78C004D64zIeAt9+Q+9mflA2//Njdl/GXH6mHJqFGuWfDP9/fdX9ffHhKPDTJNM49G3719cfB3+MPTSKNdGfirVcLfr264TW+YmPdOau33Wh34E033p3tnOUy3Dm5s1w/fJQ72znD5bgz8XbLcmc7Z7Y8d87qzdYLH+0OvNUy3dnOGS3XnZM7o/XBp7iX2M5FPjuRMsp2Z+JNlu/Ods5kPfCJ7pzVW0xg4IG3mMDAs50zmIQ7J3f2EnHnu3P2OoUf4c7Em0vGne2ctYTcOau31gn8OHfgjSXlLnJyF1b705d44AsktdCLwHcn9MvfUw9NIxIbeAn45ZcntnPTJOeeD39z8ec/w8R/YTtXPEF3gZO75/vZ5XrB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" alt="" /></p>
]]></content:encoded>
    </item>
    
    <item>
      <title>Recoding in R</title>
      <link>http://chengjun.github.io/en/2013/08/recoding-in-r/</link>
      <pubDate>2013-08-14T14:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2013/08/recoding-in-r</guid>
      <content:encoded><![CDATA[<p>Recoding variables is fairly easy in R. Here I summarize three appoaches and recommend the first one to you. </p>

<p><img src="http://farm4.staticflickr.com/3710/9508687722_545101d405.jpg" alt="" /></p>

<h2 id="list-slicing">1.List slicing</h2>

<p>The method of list slicing is the most convenient way to recode a variable. </p>

<pre><code>	x = 1:10
	x[x == 1] = 0
	x[x &gt; 1 &amp; x &lt; 6] = 1
	x[x &gt;= 6] = 3
 
	&gt; x
	&gt; [1] 0 1 1 1 1 3 3 3 3 3

	x[x == 1 | x == 0] = 4

	&gt; x
	&gt; [1] 4 4 4 4 4 3 3 3 3 3
</code></pre>

<p>Here is another example to create 3 age categories </p>

<pre><code>attach(mydata)
mydata$agecat[age &gt; 75] &lt;- "Elder"
mydata$agecat[age &gt; 45 &amp; age &lt;= 75] &lt;- "Middle Aged"
mydata$agecat[age &lt;= 45] &lt;- "Young"
detach(mydata)
</code></pre>

<h2 id="ifelse">2.ifelse</h2>
<p>For dummy coding, ifelse function could be easily employed. </p>

<pre><code>top$sportsEtc&lt;-ifelse(top$category=="Animals"
|top$category=="Autos"
|top$category=="Games"
|top$category=="People"
|top$category=="Sports"
|top$category=="Travel",
 1, 0)
</code></pre>

<h2 id="using-the-recode-function-in-the-car-library">3. Using the recode function in the car library</h2>

<p>Taking the example from recode in the car package</p>

<pre><code>library(car)

x &lt;- rep(1:3, 3)
&gt; x
[1] 1 2 3 1 2 3 1 2 3

newx &lt;- recode(x, "c(1,2)='A'; else='B'")
&gt; newx
[1] "A" "A" "B" "A" "A" "B" "A" "A" "B"
</code></pre>
]]></content:encoded>
    </item>
    
    <item>
      <title>Generating networks with igraph</title>
      <link>http://chengjun.github.io/en/2013/08/generating-networks-with-igraph/</link>
      <pubDate>2013-08-12T16:23:00+08:00</pubDate>
      <author>Cheng-Jun Wang</author>
      <guid>http://chengjun.github.io/en/2013/08/generating-networks-with-igraph</guid>
      <content:encoded><![CDATA[<p>We know that the most simple network is the regular network, such as the ring network. If all the edges in a network are generated randomly, we can get a random graph or Erdos-Renyi network (ER network). </p>

<h2 id="erdsrnyi-random-graph-model">Erdős–Rényi Random Graph model</h2>

<blockquote>
  <p>The Erdős–Rényi model, named for Paul Erdős and Alfréd Rényi, is used for generating random graphs in which edges are set between nodes with equal probabilities.</p>
</blockquote>

<p>There is a continuous shift between randomness and regularity. What are the networks between random network and regular networks?</p>

<h2 id="watts-strogatz-small-world-model">Watts-Strogatz Small World model</h2>

<blockquote>
  <p>The Watts and Strogatz model is a random graph generation model that produces graphs with small-world properties.
An initial lattice structure is used to generate a Watts-Strogatz model. Each node in the network is initially linked to its k closest neighbors. Another parameter is specified as the rewiring probability. Each edge has a probability p that it will be rewired to the graph as a random edge. </p>
</blockquote>

<h2 id="barabsialbert-ba-preferential-attachment-model">Barabási–Albert (BA) Preferential Attachment model</h2>

<blockquote>
  <p>The Barabási–Albert model is a random network model used to demonstrate a preferential attachment or a &#8220;rich-get-richer&#8221; effect. In this model, an edge is most likely to attach to nodes with higher degrees. The network begins with an initial network of m nodes. m ≥ 2 and the degree of each node in the initial network should be at least 1, otherwise it will always remain disconnected from the rest of the network.</p>

  <p>In the BA model, new nodes are added to the network one at a time. Each new node is connected to m existing nodes with a probability that is proportional to the number of links that the existing nodes already have. </p>

</blockquote>

<p>We can use igraph to play the network games, and explore the properties of generated networks.</p>

<blockquote>
  <p>igraph is an open source C library for the analysis of large-scale complex networks, with interfaces to R, Python and Ruby.</p>
</blockquote>

<p>Here is the R script for generating and visualizing networks. </p>

<pre><code>library(igraph)
g1 &lt;- graph.ring(500)
g2 &lt;- erdos.renyi.game(500, 0.0035)
g3 &lt;- rewire.edges( g1, prob = 0.5 )
g4 &lt;- barabasi.game(500)	
# 保存图片格式
png("d:/network_game.png", 
	width=5, height=5, 
	units="in", res=700)
# 绘制图片
par(mfrow=c(2,2))
plot(g1, vertex.label= NA, edge.arrow.size=0.02,vertex.size = 0.5, xlab = "Ring Network")
plot(g2, vertex.label= NA, edge.arrow.size=0.02,vertex.size = 0.5, xlab = "Random Network")
plot(g3, vertex.label= NA, edge.arrow.size=0.02,vertex.size = 0.5, xlab = "Small World Network")
plot(g4, vertex.label= NA, edge.arrow.size=0.02,vertex.size = 0.5, xlab = "Scale-free Network")
# 结束保存图片
dev.off()
</code></pre>

<p><img src="http://farm3.staticflickr.com/2875/9490993155_0787ab3832_c.jpg" alt="" /></p>

<p>Of courese, there are other network games in the library of igraph, such as the game of forest fire.</p>

<pre><code>g5 &lt;- forest.fire.game(200, fw.prob=0.37, bw.factor=0.32/0.37)
plot(g5, vertex.label= NA, edge.arrow.size=0.02,vertex.size = 0.5)
</code></pre>

<p><strong>References</strong></p>

<p>http://en.wikipedia.org/wiki/Network_science#Network_models</p>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
